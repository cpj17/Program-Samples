CREATE TABLE reg_user_details (
    user_id VARCHAR(255),
    post_id VARCHAR(255),
    unique_id UNIQUEIDENTIFIER DEFAULT NEWID(),
    first_name VARCHAR(255),
    middle_name VARCHAR(255),
    last_name VARCHAR(255),
    post_applied_for VARCHAR(255),
    date_of_application DATE,
    mobile_no VARCHAR(15),
    email VARCHAR(255),
    aadhar_no VARCHAR(12),
    voter_id_no VARCHAR(15),
    pan_no VARCHAR(10),
    driving_licence_no VARCHAR(20),
    driving_licence_valid_upto DATE,
    enrolled_esic VARCHAR(10),
    esic_no VARCHAR(20),
    enrolled_epf VARCHAR(10),
    uan_no VARCHAR(20),
    date_of_birth DATE,
    age_in_years INT,
    married_status VARCHAR(50),
    applied_earlier VARCHAR(10),
    source_of_information VARCHAR(255),
    address_of_communication VARCHAR(500),
    father_husband_name VARCHAR(255),
    blood_group VARCHAR(3),
    user_lang_known_id VARCHAR(255),
    profiency_id VARCHAR(255),
    edu_details_id VARCHAR(255),
    total_experience DECIMAL(5,2),
    relevant_experience DECIMAL(5,2),
    work_exp_id VARCHAR(255),
    report_officer_desc VARCHAR(500),
    eminent_desc VARCHAR(500),
    existing_relation VARCHAR(10),
    existing_relation_emp_name VARCHAR(255),
    existing_relation_designation VARCHAR(255),
    existing_relation_work_location VARCHAR(255),
    working_relative VARCHAR(10),
    working_relative_emp_name VARCHAR(255),
    working_relative_designation VARCHAR(255),
    working_relative_work_location VARCHAR(255),
    drawn_ctc_pa DECIMAL(18,2),
    drawn_gross_salary_pm DECIMAL(18,2),
    drawn_net_salary_pm DECIMAL(18,2),
    drawn_incentive_pm DECIMAL(18,2),
    expected_ctc_pa DECIMAL(18,2),
    expected_gross_salary_pm DECIMAL(18,2),
    expected_net_salary_pm DECIMAL(18,2),
    expected_incentive_pm DECIMAL(18,2),
    notice_period VARCHAR(50),
    place_of_submit VARCHAR(255),
    datetime_of_submit DATETIME,
    complete_status VARCHAR(10),
    dml_indicator CHAR(1),
    reference_1 VARCHAR(255),
    reference_2 VARCHAR(255),
    reference_3 VARCHAR(255)
);

CREATE PROCEDURE sp_manage_reg_user_details
    @user_id VARCHAR(255),
    @post_id VARCHAR(255),
    @unique_id UNIQUEIDENTIFIER,
    @first_name VARCHAR(255) = NULL,
    @middle_name VARCHAR(255) = NULL,
    @last_name VARCHAR(255) = NULL,
    @post_applied_for VARCHAR(255) = NULL,
    @date_of_application DATE = NULL,
    @mobile_no VARCHAR(15) = NULL,
    @email VARCHAR(255) = NULL,
    @aadhar_no VARCHAR(12) = NULL,
    @voter_id_no VARCHAR(15) = NULL,
    @pan_no VARCHAR(10) = NULL,
    @driving_licence_no VARCHAR(20) = NULL,
    @driving_licence_valid_upto DATE = NULL,
    @enrolled_esic VARCHAR(10) = NULL,
    @esic_no VARCHAR(20) = NULL,
    @enrolled_epf VARCHAR(10) = NULL,
    @uan_no VARCHAR(20) = NULL,
    @date_of_birth DATE = NULL,
    @age_in_years INT = NULL,
    @married_status VARCHAR(50) = NULL,
    @applied_earlier VARCHAR(10) = NULL,
    @source_of_information VARCHAR(255) = NULL,
    @address_of_communication VARCHAR(500) = NULL,
    @father_husband_name VARCHAR(255) = NULL,
    @blood_group VARCHAR(3) = NULL,
    @user_lang_known_id VARCHAR(255) = NULL,
    @profiency_id VARCHAR(255) = NULL,
    @edu_details_id VARCHAR(255) = NULL,
    @total_experience DECIMAL(5,2) = NULL,
    @relevant_experience DECIMAL(5,2) = NULL,
    @work_exp_id VARCHAR(255) = NULL,
    @report_officer_desc VARCHAR(500) = NULL,
    @eminent_desc VARCHAR(500) = NULL,
    @existing_relation VARCHAR(10) = NULL,
    @existing_relation_emp_name VARCHAR(255) = NULL,
    @existing_relation_designation VARCHAR(255) = NULL,
    @existing_relation_work_location VARCHAR(255) = NULL,
    @working_relative VARCHAR(10) = NULL,
    @working_relative_emp_name VARCHAR(255) = NULL,
    @working_relative_designation VARCHAR(255) = NULL,
    @working_relative_work_location VARCHAR(255) = NULL,
    @drawn_ctc_pa DECIMAL(18,2) = NULL,
    @drawn_gross_salary_pm DECIMAL(18,2) = NULL,
    @drawn_net_salary_pm DECIMAL(18,2) = NULL,
    @drawn_incentive_pm DECIMAL(18,2) = NULL,
    @expected_ctc_pa DECIMAL(18,2) = NULL,
    @expected_gross_salary_pm DECIMAL(18,2) = NULL,
    @expected_net_salary_pm DECIMAL(18,2) = NULL,
    @expected_incentive_pm DECIMAL(18,2) = NULL,
    @notice_period VARCHAR(50) = NULL,
    @place_of_submit VARCHAR(255) = NULL,
    @datetime_of_submit DATETIME = NULL,
    @complete_status VARCHAR(10) = NULL,
    @dml_indicator CHAR(1),
    @reference_1 VARCHAR(255) = NULL,
    @reference_2 VARCHAR(255) = NULL,
    @reference_3 VARCHAR(255) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    IF @dml_indicator = 'I'
    BEGIN
        INSERT INTO reg_user_details (
            user_id,
            post_id,
            unique_id,
            first_name,
            middle_name,
            last_name,
            post_applied_for,
            date_of_application,
            mobile_no,
            email,
            aadhar_no,
            voter_id_no,
            pan_no,
            driving_licence_no,
            driving_licence_valid_upto,
            enrolled_esic,
            esic_no,
            enrolled_epf,
            uan_no,
            date_of_birth,
            age_in_years,
            married_status,
            applied_earlier,
            source_of_information,
            address_of_communication,
            father_husband_name,
            blood_group,
            user_lang_known_id,
            profiency_id,
            edu_details_id,
            total_experience,
            relevant_experience,
            work_exp_id,
            report_officer_desc,
            eminent_desc,
            existing_relation,
            existing_relation_emp_name,
            existing_relation_designation,
            existing_relation_work_location,
            working_relative,
            working_relative_emp_name,
            working_relative_designation,
            working_relative_work_location,
            drawn_ctc_pa,
            drawn_gross_salary_pm,
            drawn_net_salary_pm,
            drawn_incentive_pm,
            expected_ctc_pa,
            expected_gross_salary_pm,
            expected_net_salary_pm,
            expected_incentive_pm,
            notice_period,
            place_of_submit,
            datetime_of_submit,
            complete_status,
            dml_indicator,
            reference_1,
            reference_2,
            reference_3
        ) VALUES (
            @user_id,
            @post_id,
            @unique_id,
            @first_name,
            @middle_name,
            @last_name,
            @post_applied_for,
            @date_of_application,
            @mobile_no,
            @email,
            @aadhar_no,
            @voter_id_no,
            @pan_no,
            @driving_licence_no,
            @driving_licence_valid_upto,
            @enrolled_esic,
            @esic_no,
            @enrolled_epf,
            @uan_no,
            @date_of_birth,
            @age_in_years,
            @married_status,
            @applied_earlier,
            @source_of_information,
            @address_of_communication,
            @father_husband_name,
            @blood_group,
            @user_lang_known_id,
            @profiency_id,
            @edu_details_id,
            @total_experience,
            @relevant_experience,
            @work_exp_id,
            @report_officer_desc,
            @eminent_desc,
            @existing_relation,
            @existing_relation_emp_name,
            @existing_relation_designation,
            @existing_relation_work_location,
            @working_relative,
            @working_relative_emp_name,
            @working_relative_designation,
            @working_relative_work_location,
            @drawn_ctc_pa,
            @drawn_gross_salary_pm,
            @drawn_net_salary_pm,
            @drawn_incentive_pm,
            @expected_ctc_pa,
            @expected_gross_salary_pm,
            @expected_net_salary_pm,
            @expected_incentive_pm,
            @notice_period,
            @place_of_submit,
            @datetime_of_submit,
            @complete_status,
            @dml_indicator,
            @reference_1,
            @reference_2,
            @reference_3
        );
    END
    ELSE IF @dml_indicator = 'U'
    BEGIN
        UPDATE reg_user_details
        SET
            first_name = @first_name,
            middle_name = @middle_name,
            last_name = @last_name,
            post_applied_for = @post_applied_for,
            date_of_application = @date_of_application,
            mobile_no = @mobile_no,
            email = @email,
            aadhar_no = @aadhar_no,
            voter_id_no = @voter_id_no,
            pan_no = @pan_no,
            driving_licence_no = @driving_licence_no,
            driving_licence_valid_upto = @driving_licence_valid_upto,
            enrolled_esic = @enrolled_esic,
            esic_no = @esic_no,
            enrolled_epf = @enrolled_epf,
            uan_no = @uan_no,
            date_of_birth = @date_of_birth,
            age_in_years = @age_in_years,
            married_status = @married_status,
            applied_earlier = @applied_earlier,
            source_of_information = @source_of_information,
            address_of_communication = @address_of_communication,
            father_husband_name = @father_husband_name,
            blood_group = @blood_group,
            user_lang_known_id = @user_lang_known_id,
            profiency_id = @profiency_id,
            edu_details_id = @edu_details_id,
            total_experience = @total_experience,
            relevant_experience = @relevant_experience,
            work_exp_id = @work_exp_id,
            report_officer_desc = @report_officer_desc,
            eminent_desc = @eminent_desc,
            existing_relation = @existing_relation,
            existing_relation_emp_name = @existing_relation_emp_name,
            existing_relation_designation = @existing_relation_designation,
            existing_relation_work_location = @existing_relation_work_location,
            working_relative = @working_relative,
            working_relative_emp_name = @working_relative_emp_name,
            working_relative_designation = @working_relative_designation,
            working_relative_work_location = @working_relative_work_location,
            drawn_ctc_pa = @drawn_ctc_pa,
            drawn_gross_salary_pm = @drawn_gross_salary_pm,
            drawn_net_salary_pm = @drawn_net_salary_pm,
            drawn_incentive_pm = @drawn_incentive_pm,
            expected_ctc_pa = @expected_ctc_pa,
            expected_gross_salary_pm = @expected_gross_salary_pm,
            expected_net_salary_pm = @expected_net_salary_pm,
            expected_incentive_pm = @expected_incentive_pm,
            notice_period = @notice_period,
            place_of_submit = @place_of_submit,
            datetime_of_submit = @datetime_of_submit,
            complete_status = @complete_status,
            dml_indicator = @dml_indicator,
            reference_1 = @reference_1,
            reference_2 = @reference_2,
            reference_3 = @reference_3
        WHERE user_id = @user_id AND post_id = @post_id AND unique_id = @unique_id;
    END
    ELSE IF @dml_indicator = 'D'
    BEGIN
        DELETE FROM reg_user_details
        WHERE user_id = @user_id AND post_id = @post_id AND unique_id = @unique_id;
    END
END;